"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const exec_1 = require("./lib/exec");
const proj_1 = require("./lib/proj");
const npm_1 = require("./lib/npm");
// TODO: tests when same dep is in dependencies/devDependencies/peerDependencies
// TODO: links to distDir
describe('link', () => {
    it('symlinks dirs together without installing normal deps', () => {
        let proj = proj_1.buildProj({
            'monorepo.json': {
                'packages': ['packages/*']
            },
            'package.json': {
                dependencies: {
                    moment: '*'
                }
            },
            'packages/': {
                'core/': {
                    'package.json': {
                        name: 'core',
                        dependencies: {
                            moment: '*'
                        }
                    }
                },
                'plug/': {
                    'package.json': {
                        name: 'plug',
                        dependencies: {
                            'core': '*'
                        }
                    }
                }
            }
        });
        let { success } = exec_1.bin(['link'], proj.path);
        expect(success).toBe(true);
        expect(npm_1.queryInstalled(proj.path)).toEqual({
            'packages/plug': {
                core: '../core'
            }
        });
    });
});
